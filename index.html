<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kamera test</title>
<style>
body { font-family: sans-serif; text-align: center; background: #f1f5f9; }
video { width: 90%; margin-top: 20px; border-radius: 10px; background: black; }
button { margin: 10px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 8px; background: #0088cc; color: white; }
button:hover { background: #006699; }
</style>
</head>
<body>
<h2>ðŸ“¸ Kamera test sahifasi</h2>
<video id="camera" autoplay playsinline></video><br>
<button onclick="switchCamera()">Kamerani almashtirish</button>
<p id="status"></p>

<script>
let currentFacing = 'environment';
let stream;

async function startCamera() {
  try {
    if (stream) stream.getTracks().forEach(t => t.stop());
    stream = await navigator.mediaDevices.getUserMedia({
      video: { facingMode: currentFacing }
    });
    document.getElementById('camera').srcObject = stream;
    document.getElementById('status').innerText = 
      (currentFacing === 'environment' ? 'Orqa kamera' : 'Old kamera') + ' yoqildi';
  } catch (e) {
    alert('Kamera ishlamadi: ' + e.message);
  }
}

function switchCamera() {
  currentFacing = (currentFacing === 'environment') ? 'user' : 'environment';
  startCamera();
}

startCamera();
</script>
</body>
</html>
